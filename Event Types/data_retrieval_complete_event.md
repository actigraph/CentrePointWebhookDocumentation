# Data Retrieval Complete Event

Triggered when a data retrieval request made through the CentrePoint (V3) API has completed. This event only applies to studies utilizing the CentrePoint Insight Watch (CPW) or other studies with a 'RAW-only' data collection mode. This event can be utilized to know when data files are available to be downloaded (from a previous data retrieval request) in the CentrePoint (V3) API.

**Webhook event name:**

`data_retrieval_complete`

**Webhook Payload Parameters:**

|Name|Type|Description|
|:---|:---|:----------|
|client_id|String (GUID)|CentrePoint API Client ID|
|tracking_id|String (GUID)|Data Retrieval Request Tracking ID|
|study_id|Number|CentrePoint Study ID|
|subject_id|Number|CentrePoint Subject ID|
|subject_identifier|String|CentrePoint Subject Identifier|
|created_at_utc|String|Created Date/Time of request|
|started_at_utc|String|Date/Time request began processing|
|completed_at_utc|String|Date/Time request completed processing|
|request_status|String|Request Status|
|files|String|Array of data files (see below) generated by the data retrieval request|
|error_message|String|Error message if request failed|

**Data File Payload:**

|Name|Type|Description|
|----|----|-----------|
|monitor_serial|String|Activity Monitor Serial Number|
|file_type|String|File Type|
|min_event_timestamp|String (Date)|Minimum timestamp of processsed data|
|max_event_timestamp|String (Date)|Maximum timestamp of processsed data|
|file_size|Number|File Size in Bytes|
|file_index|Number|Zero based file index (used when a single file is split)|
|file_name|String|File Name|

**Webhook payload example:**

The following are the parameters within the webhook request when upload processing is started

```http
POST <web hook uri goes here>
host: <host name goes here>
content-type: application/json; charset=utf-8
request-context: appId=cid-v1:d39b3fc7-69a6-4aec-bca4-4d53b4b4bb3e
request-id: |5e98ebcb010202488a0c13d494908f80.19b378e32058274d.
traceparent: 00-5e98ebcb010202488a0c13d494908f80-19b378e32058274d-00
user-agent: ActiGraph-Hookshot/1.0 ActiGraph-Hookshot/1.0 ActiGraph-Hookshot/1.0
x-actigraph-delivery: 62049727-b616-1ff6-f998-ae27ffc8c3cb
x-actigraph-event: data_retrieval_complete
x-actigraph-webhook-id: 56
x-client-cert-used: False
content-length: 806
connection: keep-alive
{
  "client_id": "YrcN0eLR5IIiCgG85CgkzT0",
  "tracking_id": "a7da760f-7906-4cb7-964a-ab87f45ea962",
  "study_id": 1064,
  "subject_id": 19512,
  "subject_identifier": "TEST1234",
  "created_at_utc": "2019-07-17T18:18:20Z",
  "started_at_utc": "2019-07-17T18:18:23Z",
  "completed_at_utc": "2019-07-17T18:18:23Z",
  "request_status": "Completed",
  "files": [
    {
      "monitor_serial": "TAS1Z12345678",
      "file_type": "avro",
      "min_event_timestamp": "2019-07-17T16:52:53+00:00",
      "max_event_timestamp": "2019-07-17T16:55:46+00:00",
      "file_size": 4570,
      "file_index": 1,
      "file_name": "19512_TAS1Z12345678_1563382373_1563382546_6794.avro"
    },
    {
      "monitor_serial": null,
      "file_type": "summary",
      "min_event_timestamp": "2019-07-17T16:52:53+00:00",
      "max_event_timestamp": "2019-07-17T16:55:46+00:00",
      "file_size": 294,
      "file_index": 0,
      "file_name": "19512_37da760f-7906-4cb7-964a-ab87f45ea962-2024.json"
    }
  ]
}

## More information

- [Overview](https://github.com/actigraph/WebhookDocumentation)
- [Managing Webhooks](managing_webhooks.md)
- [Event Types](event_types.md)
- [Securing Webhooks](securing_webhooks.md)
- [Validating Webhooks](validating_webhooks.md)